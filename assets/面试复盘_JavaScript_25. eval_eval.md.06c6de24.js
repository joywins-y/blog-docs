import{_ as s,o as a,c as l,V as n}from"./chunks/framework.bd00fe0c.js";const A=JSON.parse('{"title":"eval","description":"","frontmatter":{},"headers":[],"relativePath":"面试复盘/JavaScript/25. eval/eval.md","filePath":"面试复盘/JavaScript/25. eval/eval.md","lastUpdated":1712573589000}'),p={name:"面试复盘/JavaScript/25. eval/eval.md"},e=n(`<h1 id="eval" tabindex="-1"><em>eval</em> <a class="header-anchor" href="#eval" aria-label="Permalink to &quot;*eval*&quot;">​</a></h1><h2 id="经典真题" tabindex="-1">经典真题 <a class="header-anchor" href="#经典真题" aria-label="Permalink to &quot;经典真题&quot;">​</a></h2><ul><li><em>JavaScript</em> 中的 <em>eval</em> 方法是啥？一般什么场景下使用？</li></ul><h2 id="关于-eval-你所需要知道的内容" tabindex="-1">关于 <em>eval</em> 你所需要知道的内容 <a class="header-anchor" href="#关于-eval-你所需要知道的内容" aria-label="Permalink to &quot;关于 *eval* 你所需要知道的内容&quot;">​</a></h2><h3 id="eval-的基本用法" tabindex="-1"><em>eval</em> 的基本用法 <a class="header-anchor" href="#eval-的基本用法" aria-label="Permalink to &quot;*eval* 的基本用法&quot;">​</a></h3><p>首先我们来看一下 <em>eval( )</em> 函数的基本用法。</p><p><em>eval( )</em> 函数接收一个字符串作为参数，该字符串一个表示 <em>JavaScript</em> 表达式、语句或一系列语句的字符串。表达式可以包含变量与已存在对象的属性。</p><p>示例如下：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">console.log(&quot;Hello!&quot;)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// Hello!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> str </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">    var a = 1;</span></span>
<span class="line"><span style="color:#C3E88D;">    var b = 2;</span></span>
<span class="line"><span style="color:#C3E88D;">    if(a &gt; b) {</span></span>
<span class="line"><span style="color:#C3E88D;">        console.log(&#39;a &gt; b&#39;);</span></span>
<span class="line"><span style="color:#C3E88D;">    } else {</span></span>
<span class="line"><span style="color:#C3E88D;">        console.log(&#39;a&lt;b&#39;);</span></span>
<span class="line"><span style="color:#C3E88D;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(str)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// a&lt;b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2 + 2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 4（ number 类型 ）</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">String</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// [String: &#39;Hello&#39;]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2 + 2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#89DDFF;">===</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2 + 2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) </span><span style="color:#89DDFF;">===</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">String</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2 + 2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// false</span></span></code></pre></div><p>通过上面的代码我们可以发现，<em>eval( )</em> 会将传入的字符串作为 <em>JavaScript</em> 来进行执行。</p><p>如果 <em>eval( )</em> 的参数不是字符串， <em>eval( )</em> 会将参数原封不动地返回。例如：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">5</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 5</span></span></code></pre></div><p>如果传入的字符串不是 <em>JavaScript</em> 代码，那么也会将此字符串原封不动的返回。例如：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> Hello </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 5</span></span></code></pre></div><h3 id="eval-作用域" tabindex="-1"><em>eval</em> 作用域 <a class="header-anchor" href="#eval-作用域" aria-label="Permalink to &quot;*eval* 作用域&quot;">​</a></h3><p><em>eval</em> 里面的代码在当前词法环境中执行，因此它可以看到外部变量：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">f</span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">eval</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">console.log(a)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 2</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">f</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>它也可以改变外部变量：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x = 10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(x)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 10, value modified</span></span></code></pre></div><p>在严格模式下， <em>eval</em> 有自己的词法环境。因此，在 <em>eval</em> 内部声明的函数和变量在外部不可见：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">let x = 5; function f() {}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">typeof</span><span style="color:#BABED8;"> x)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// undefined (no such variable)</span></span></code></pre></div><p>如果没有 <em>use strict</em>，<em>eval</em> 没有自己的词法环境，所以我们会在外面看到 <em>x</em> 和 <em>f</em> :</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">eval</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">var x = 5; function f() {}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(x)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 5</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">typeof</span><span style="color:#BABED8;"> x)</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// number</span></span></code></pre></div><h3 id="永远不要使用-eval" tabindex="-1">永远不要使用 <em>eval</em> <a class="header-anchor" href="#永远不要使用-eval" aria-label="Permalink to &quot;永远不要使用 *eval*&quot;">​</a></h3><p>明白了 <em>eval( )</em> 函数的基本用法后，你心里一定会有这么一个疑问，那就是这玩意儿用来干嘛？</p><p>在现代编程中，<em>eval</em> 的使用非常谨慎。人们常说“ <em>eval is evil（eval 是邪恶的）</em> ”。</p><p>原因很简单：很久很久以前，<em>JavaScript</em> 是一种弱得多的语言，很多事情只能用 <em>eval</em> 来完成。但那段时间已经过去十年了。</p><p>现在，几乎没有理由使用 <em>eval</em>。如果有人使用了它，那么一个更好的选择是用现代语言结构或 <em>JavaScript</em> 模块替换它。</p><p>总结起来，有如下的理由让我们不要使用 <em>eval</em>：</p><ul><li><em>eval</em> 是一个危险的函数， 它使用与调用者相同的权限执行代码。如果你用 <em>eval</em> 运行的字符串代码被恶意方（不怀好意的人）修改，您最终可能会在您的网页/扩展程序的权限下，在用户计算机上运行恶意代码。（不安全）</li><li><em>eval</em> 通常比其他替代方法更慢，因为它必须调用 <em>JS</em> 解释器，而许多其他结构则可被现代 <em>JS</em> 引擎进行优化。使用 <em>eval</em> 往往比普通 <em>JavaScript</em> 代码慢几个数量级。（性能不好）</li><li>产生混乱的代码逻辑</li></ul><h2 id="真题解答" tabindex="-1">真题解答 <a class="header-anchor" href="#真题解答" aria-label="Permalink to &quot;真题解答&quot;">​</a></h2><ul><li><em>JavaScript</em> 中的 <em>eval</em> 方法是啥？一般什么场景下使用？</li></ul><blockquote><p>参考答案：</p><p><em>eval</em> 是 <em>JavaScript</em> 中的一个全局函数，它将指定的字符串计算为 <em>JavaScript</em> 代码并执行它。</p><p>在现代 <em>JavaScript</em> 编程中，我们应该尽量避免使用 <em>eval</em>，之前所有使用 <em>eval</em> 的地方都有更好的方式来进行代替，所以在现代 <em>JavaScript</em> 编程中，<em>eval</em> 没有什么使用场景存在，也就是说，并不存在某些场景必须要使用 <em>eval</em> 才能实现的。</p></blockquote><p>-<em>EOF</em>-</p>`,34),o=[e];function t(c,r,y,D,F,i){return a(),l("div",null,o)}const m=s(p,[["render",t]]);export{A as __pageData,m as default};
